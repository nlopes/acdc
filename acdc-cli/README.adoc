# `acdc-cli`

This is the main binary for the command line processor. Think of it as the equivalent to
the `asciidoctor` tool.

## Usage

[source,console]
....
cargo run --all-features -- --help

AsciiDoc toolchain

Usage: acdc <COMMAND>

Commands:
  convert  Convert AsciiDoc documents to various output formats
  inspect  Inspect AST structure of AsciiDoc documents
  tck      Run TCK compliance tests (reads JSON from stdin)
  help     Print this message or the help of the given subcommand(s)

Options:
  -h, --help     Print help
  -V, --version  Print version
....

## Subcommands

### convert

Convert `AsciiDoc` documents to various output formats (HTML, terminal).

[source,console]
....
acdc convert [OPTIONS] [FILES]...
....

### inspect

Inspect the AST structure of `AsciiDoc` documents. Useful for debugging and understanding how acdc parses documents. Only available with `--features inspect`.

[source,console]
....
acdc inspect [OPTIONS] <FILE>
....

### tck

Run TCK (Test Compatibility Kit) compliance tests. Reads JSON from stdin and outputs AST as JSON. Only available with `--features tck`.

## Backends (converters) supported

Check the `link:../converters/README.adoc[converters README]` for details.

- `link:../converters/html[html]` (default)
- `link:../converters/manpage[manpage]` (available with `--features manpage`)
- `link:../converters/terminal[terminal]` (available with `--features terminal`)

### Building an optional backend or tool

[source,console]
....
cargo build --features terminal
cargo build --features inspect
cargo build --features tck
....

Alternatively, you can build them all like so:

[source,console]
....
cargo build --all-features
....

## Feature Flags

`acdc-cli` uses Cargo feature flags to enable optional converters and development tools. Here's what's available:

### Output Converters

* `html` (default) - HTML5 converter with Asciidoctor-compatible styling
* `manpage` - Manpage converter
* `terminal` - Terminal converter with ANSI color support

### Development Tools

* `inspect` - AST inspection tool for debugging parser output
* `tck` - Technology Compatibility Kit for spec compliance testing

### Feature Groups

For convenience, you can use these feature groups:

* `all-backends` - Enables both HTML and terminal converters
* `dev-tools` - Enables the inspect tool
* `test-tools` - Enables the TCK tool

### Usage Examples

Build with terminal converter:

[source,console]
....
cargo build --features terminal
....

Build with all backends:

[source,console]
....
cargo build --features all-backends
....

Build with development tools:

[source,console]
....
cargo build --features dev-tools
....

Build with everything:

[source,console]
....
cargo build --all-features
....

### Built-in Dependencies

Parser dependencies (ureq for remote includes, evalexpr for expressions, encoding_rs for encoding detection) are built-in and always available. They're core to AsciiDoc processing and don't require feature flags.

## Examples

Convert a file to HTML:

[source,console]
....
acdc convert document.adoc
....

Convert with terminal backend:

[source,console]
....
acdc convert --backend terminal document.adoc
....

Inspect document AST:

[source,console]
....
acdc inspect document.adoc --show-locations
....

## Extra Logging

If you want more logs, especially useful if you're troubleshooting or reporting an error,
please adjust the `ACDC_LOG` environment variable.

[source,console]
....
ACDC_LOG=trace cargo run -- convert your-file.adoc
....

or if you're running a binary already built:

[source,console]
....
ACDC_LOG=trace acdc convert your-file.adoc
....
